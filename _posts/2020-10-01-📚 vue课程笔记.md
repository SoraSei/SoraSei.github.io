---
layout: post
title: ğŸ“š vueè¯¾ç¨‹ç¬”è®°
img: header_post.jpg
tags: [vue, ğŸ“š]
---

- [ç¯å¢ƒå˜é‡ä¸æ¨¡å¼](#ç¯å¢ƒå˜é‡ä¸æ¨¡å¼)
- [è®¾ç½®](#è®¾ç½®)
- [åŸºç¡€](#åŸºç¡€)
- [è¿‡æ»¤å™¨ è§‚å¯Ÿå±æ€§ è®¡ç®—å±æ€§](#è¿‡æ»¤å™¨-è§‚å¯Ÿå±æ€§-è®¡ç®—å±æ€§)
- [è¡¨å•ç»‘å®š è¡¨å•ä¿®é¥°ç¬¦](#è¡¨å•ç»‘å®š-è¡¨å•ä¿®é¥°ç¬¦)
- [ç»„ä»¶](#ç»„ä»¶)
- [è·¯ç”± vue-router](#è·¯ç”±-vue-router)
- [äº‹ä»¶å¤šå¤„ç†](#äº‹ä»¶å¤šå¤„ç†)
- [å…¶ä»–](#å…¶ä»–)
  - [åˆ†å‰²æ ](#åˆ†å‰²æ )
  - [è·¯å¾„](#è·¯å¾„)
  - [å›¾åƒåˆå§‹æœªè½½å…¥](#å›¾åƒåˆå§‹æœªè½½å…¥)

# ç¯å¢ƒå˜é‡ä¸æ¨¡å¼

- ç¯å¢ƒå˜é‡ `.env`ï¼Œä½¿ç”¨å˜é‡ `VUE_APP_` å‰ç¼€
  - `.env.development` å¼€å‘ç¯å¢ƒ
  - `.env.production` ç”Ÿäº§ç¯å¢ƒ
  - `.env.local` git å¿½ç•¥
- æ¨¡å¼ `NODE_ENV`
  - `NODE_ENV=development` å¼€å‘æ¨¡å¼ï¼Œç”¨äº `serve`
  - `NODE_ENV=production` ç”Ÿäº§æ¨¡å¼ï¼Œç”¨äº `build` å’Œ `test:e2e`
  - `NODE_ENV=test` æµ‹è¯•æ¨¡å¼ï¼Œç”¨äº `test:unit`

# è®¾ç½®

- package.json

```js
{
  "dev-build": "vue-cli-service build --mode development", // æŒ‡å®šæ¨¡å¼
  "browserslist": ["> 1%", "last 2 versions", "not ie <= 8"] // æµè§ˆå™¨å…¼å®¹æ€§
}
```

- vue.config.js

```js
module.exports = {
  outputDir: process.env.NODE_ENV === "production" ? "" : "dist",
  baseUrl: process.env.NODE_ENV === "production" ? "/" : "/",
  publicPath: process.env.NODE_ENV === "production" ? "/" : "/",
  configureWebpack: (config) => {},
  devServer: {
    host: "0.0.0.0",
    port: 8080,
    https: false,
    hotOnly: false,
    proxy: null,
    before: (app) => {},
  }, // webpack-dev-server
  parallel: require("os").cpus().length > 1, // å¤šæ ¸
  pwa: {},
  pluginOptions: {},
};
```

# åŸºç¡€

- `v-if` æ˜¾ç¤ºæ¡ä»¶
- `v-for` å¾ªç¯æ•°ç»„
- `v-bind` ç»‘å®šæ•°æ®
- `v-on` äº‹ä»¶å¤„ç†
- `v-model` åŒå‘ç»‘å®š

# è¿‡æ»¤å™¨ è§‚å¯Ÿå±æ€§ è®¡ç®—å±æ€§

```html
<div id="myApp">
  <p>{{ item | toupper }}ä»·æ ¼ï¼š{{ price }}å††ï¼Œå«ç¨ä»·æ ¼ï¼š{{ priceInTax }}å††</p>
  <button @click="btnClick1(10800)">ä»·æ ¼æ”¹ä¸º10800å††</button>
  <button @click="btnClick2(10800)">å«ç¨ä»·æ ¼æ”¹ä¸º10800å††</button>
</div>
<script>
  var myApp = new Vue({
    el: "#myApp",
    data: { item: "Switch", price: 29980 }, // è§‚å¯Ÿå±æ€§éœ€åœ¨åˆå§‹å£°æ˜ï¼Œè®¡ç®—å±æ€§ä¸éœ€åœ¨åˆå§‹å£°æ˜
    watch: {
      // è§‚å¯Ÿ priceï¼ŒbtnClick1() æ”¹å˜ price
      price: function (newVal, oldVal) {
        console.log(newVal, oldVal);
        this.priceInTax = Math.round(this.price * 1.08);
      },
    },
    computed: {
      // è®¡ç®— priceInTax
      priceInTax: {
        // è®¡ç®—å±æ€§ .get()ï¼Œç›¸å½“äº priceInTax: function () { return this.price*1.08; },
        get: function () {
          return this.price * 1.08;
        },
        // è®¡ç®—å±æ€§ .set()ï¼ŒbtnClick2() æ”¹å˜ priceInTax
        set: function (value) {
          this.price = value / 1.08;
        },
      },
    },
    filters: {
      toupper: function (value) {
        return value.toUpperCase();
      },
    },
    methods: {
      btnClick1: function (newPrice) {
        this.price = newPrice;
      },
      btnClick2: function (newPrice) {
        this.priceInTax = newPrice;
      },
    },
  });
</script>
```

# è¡¨å•ç»‘å®š è¡¨å•ä¿®é¥°ç¬¦

```html
<div id="myApp">
  <!-- è¡¨å•å¤é€‰ input[type="checkbox"] -->
  <input
    type="checkbox"
    id="ç”ŸåŒ–å±æœº7"
    value="ç”ŸåŒ–å±æœº7"
    v-model="checkedGames"
  />
  <label for="ç”ŸåŒ–å±æœº7">ç”ŸåŒ–å±æœº7</label>
  <input
    type="checkbox"
    id="æ¨¡æ‹Ÿé£è¡Œ"
    value="æ¨¡æ‹Ÿé£è¡Œ"
    v-model="checkedGames"
  />
  <label for="æ¨¡æ‹Ÿé£è¡Œ">æ¨¡æ‹Ÿé£è¡Œ</label><br />
  <p>æ‚¨é€‰æ‹©çš„æ¸¸æˆæ˜¯: {{ checkedGames }}</p>
  <!-- è¡¨å•å•é€‰ input[type="radio"] -->
  <input type="radio" id="male" value="ç”·" v-model="pickedSex" />
  <label for="male">ç”·</label><br />
  <input type="radio" id="female" value="å¥³" v-model="pickedSex" />
  <label for="female">å¥³</label><br />
  <p>æ€§åˆ«: {{ pickedSex }}</p>
  <!-- è¡¨å•ä¸‹æ‹‰æ¡†å•é€‰/å¤é€‰ select multipleä¸ºå¤šé€‰ -->
  <select v-model="likedNBAStar" multiple style="width:200px;height:200px;">
    <option>ç§‘æ¯”</option>
    <option>è©¹å§†æ–¯</option>
  </select>
  <p>æˆ‘å–œæ¬¢: {{ likedNBAStar }}</p>
  <!--è¡¨å•ä¿®é¥°ç¬¦ input[type="text"] textarea .lazy .number .trim -->
  <label for="username">ç”¨æˆ·ï¼š</label>
  <input
    type="text"
    id="username"
    v-model.lazy="username"
    @change="checkUsername($event)"
  />
  <span v-if="checkUsernameOK">å¯æ³¨å†Œ</span>
  <label for="age">å¹´é¾„ï¼š</label>
  <input type="number" id="age" v-model.number="age" />
  <label for="content">ä¸ªäººç®€ä»‹ï¼š</label><br />
  <textarea id="content" v-model.trim="content" cols="55" rows="8"></textarea>
  <p>ç”¨æˆ·åï¼š{{ username }}</p>
  <p>å¹´é¾„ï¼š{{ age }}</p>
  <p>ä¸ªäººç®€ä»‹ï¼š{{ description }}</p>
</div>
<script>
  var myApp = new Vue({
    el: "#myApp",
    data: {
      checkedGames: [],
      pickedSex: "",
      likedNBAStar: null,
      username: "",
      checkUsernameOK: false,
      age: "",
      description: "",
    },
    methods: {
      checkUsername: function (event) {
        if (this.username.length > 0) this.checkUsernameOK = true;
        else this.checkUsernameOK = false;
        this.debugLog(event); // äº‹ä»¶ä¿¡æ¯
        console.log(
          event.srcElement.tagName,
          event.srcElement.id,
          event.srcElement.innerHTML,
          event.key ? event.key : ""
        );
      },
    },
  });
</script>
```

# ç»„ä»¶

```html
<div id="myApp">
  <table border="1">
    <tr>
      <td>ç¼–å·</td>
      <td>æ¸¸æˆåç§°</td>
    </tr>
    <!-- è¡¨è¡Œç»„ä»¶ is -->
    <tr is="my-row1"></tr>
    <tr is="my-row2"></tr>
  </table>
  <div>è¯·è¾“å…¥åå­—ï¼š<input v-model="myname" /></div>
  <custom
    :score="50"
    :pname="myname"
    :age="25"
    :detail="{ address:'earth', language:'ä¸–ç•Œè¯­' }"
    :a="6"
    :b="12"
    v-on:add_event="getAddResult"
  ></custom>
  <p>{{ result }}</p>
  <nba-all-stars c="å¥¥å°¼å°”"
    >å…¨æ˜æ˜Ÿé˜µå®¹æ˜¯ï¼š<span slot="pf">åŠ å†…ç‰¹</span></nba-all-stars
  >
</div>
<script>
  // è¡¨è¡Œç»„ä»¶
  Vue.component("my-row1", {
    template: "<tr><td>(1)</td><td>å¡å°”è¾¾ä¼ è¯´:è’é‡ä¹‹æ¯(3/3)</td></tr>",
  });
  Vue.component("my-row2", {
    template: "<tr><td>(2)</td><td>æ–°é©¬é‡Œå¥¥èµ›è½¦(4/28)</td></tr>",
  });
  Vue.component("custom", {
    template:
      "<div>ä»Šå¤©çš„å¤©æ°”æ˜¯{{ todayWeather }}</div>" +
      "<div>ä½ å¥½ï¼Œ{{ pname }}ï¼Œè€ƒè¯•æˆç»©{{ score }}åˆ†ï¼Œ{{ testResult }}</div>" +
      "<div>å¹´é¾„ï¼š{{ this.age }}å²<br/>åœ°å€ï¼š{{ this.detail.address }}<br/>è¯­è¨€ï¼š{{ this.detail.language }}</div>" +
      '<div><button v-on:click="add">åŠ </button></div>',
    // ç»„ä»¶æ•°æ®
    data: function () {
      return { todayWeather: "é›¨åŠ é›ª" };
    },
    // ç»„ä»¶å‚æ•°
    props: ["score", "pname", "a", "b"],
    // ç»„ä»¶å‚æ•°éªŒè¯
    props: {
      age: {
        type: Number,
        required: true,
        validator: function (value) {
          return value >= 0 && value <= 130;
        },
      },
      detail: {
        type: Object,
        default: function () {
          return { address: "US", language: "English" };
        },
      },
    },
    computed: {
      testResult: function () {
        var strResult = "";
        if (this.score < 60) strResult = "ä¸åŠæ ¼";
        else if (this.score <= 100) strResult = "ä¼˜ç§€";
        return strResult;
      },
    },
    methods: {
      add: function () {
        var value = 0;
        value = this.a + this.b;
        this.$emit("add_event", { result: value }); // ç»„ä»¶äº‹ä»¶ä¼ é€’ï¼Œåœ¨å­ç»„ä»¶ä¸­ $emit è§¦å‘äº‹ä»¶
      },
    },
  });
  Vue.component("nba-all-stars", {
    props: ["c"],
    template:
      '<div><slot></slot><br/>ä¸­é”‹ï¼š{{ c }}<br/>å¤§å‰ï¼š<slot name="pf"></slot></div>', // ç»„ä»¶æ’æ§½
  });
  var WeatherComponent = { template: "<div>ä»Šå¤©ä¸‹é›¨</div>" }; // ç»„ä»¶å±€éƒ¨æ³¨å†Œï¼Œå…¶ä»–ä¸ºå…¨å±€æ³¨å†Œ
  var myApp = new Vue({
    el: "#myApp",
    data: { myname: "Koma", result: 0 },
    components: { "my-weather": WeatherComponent },
    methods: {
      // ç»„ä»¶äº‹ä»¶ä¼ é€’ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ v-on ä¾¦å¬äº‹ä»¶
      getAddResult: function (pval) {
        this.result = pval.result;
      },
    },
  });
</script>
```

# è·¯ç”± vue-router

```js
// src/router/index.js æ–‡ä»¶
import Vue from "vue";
import Router from "vue-router"; // å¯¼å…¥ router
import HelloWorld from "@/components/HelloWorld";
Vue.use(Router); // æ³¨å†Œ router
// å¯¼å‡º router å¯¹è±¡
export default new Router({
  routes: [
    {
      path: "/player/:uid/:nationality", // åŠ¨æ€è·¯ç”±
      props: true, // å¤šå‚æ•°è·¯ç”±éœ€å¼€ props
      name: "Player",
      component: Player,
      components: { myPart1: Part1, myPart2: Part2 }, // å¤šè·¯ç”±ï¼Œåœ¨ router-view æ ‡ç­¾ä¸­è°ƒç”¨ name="myPart1"
      // åµŒå¥—è·¯ç”±
      children: [
        { path: "profile", component: PlayerProfile },
        { path: "stats", component: PlayerStats },
      ],
      alias: "/aboutme", // åˆ«åï¼Œåœ°å€æ æ˜¾ç¤º
      redirect: "/player/1", // é‡å®šå‘ï¼Œåœ°å€æ éšè—åŸåœ°å€
    },
  ],
});

// src/main.js æ–‡ä»¶
import router from "./router"; // å¯¼å…¥ router å¯¹è±¡
new Vue({
  el: "#app",
  router, // æ³¨å†Œ router å¯¹è±¡
  components: { App },
  template: "<App/>",
});
```

```html
<template>
  <div id="app">
    <button @click="btnClick(1)">User1</button>
    <router-link :to="{ name: 'Player', params: { uid: 2 }}">User2</router-link>
    <router-link :to="{ path: '/player/3/stats' }">User3</router-link>
    <router-link to="/player/4/usa">User4</router-link>
    <router-view />
    <!-- è·¯ç”±å‡ºå£ï¼Œå¤šè·¯ç”±è°ƒç”¨ name="myPart1" -->
  </div>
</template>
<script>
  export default {
    methods: {
      btnClick(uid) {
        this.$router.push({ path: "/player/${uid}/stats" });
        this.$router.push({ name: "Player", params: { uid: uid } });
        this.$router.push({ path: "/player", query: { uid: uid } }); // url-get å†™æ³•
        this.$router.go(-1); // url å†å²æ§åˆ¶
      },
    },
  };

  // Player.vue æ–‡ä»¶
  export default {
    name: "Player",
    props: ["uid", "nationality"], // è°ƒç”¨ {{uid}} å’Œ {{nationality}} æ¥æ”¶æ•°æ®ï¼Œæˆ–è°ƒç”¨ {{$route.params.uid}} å’Œ {{$route.params.nationality}} æ¥æ”¶æ•°æ®
    mounted() {}, // å­è·¯ç”±åˆæ¬¡æ¸²æŸ“
    // å­è·¯ç”±å†æ¬¡æ¸²æŸ“
    beforeRouteUpdate(to, from, next) {
      next();
    },
  };
</script>
```

# äº‹ä»¶å¤šå¤„ç†

```html
<div id="hello-vue">
  <h2>ç‚¹å‡»æ¬¡æ•°ï¼š{{ count }}</h2>
  <button @click="btnClick1(), btnClick2($event)">ç‚¹å®ƒåŠ 1</button>
</div>
<script>
  const app = Vue.createApp({
    data() {
      return { count: 0 };
    },
    methods: {
      btnClick1() {
        this.count++;
      },
      btnClick2(event) {
        console.log(event);
        console.log(event.target);
        console.log(event.target.attributes.class);
        console.log(event.target.innerText);
      },
    },
  });
  app.mount("#hello-vue");
</script>
```

- äº‹ä»¶ä¿®é¥°ç¬¦
  - `.prevent`: `event.preventDefault()`
  - `.stop`: `event.stopPropagation()`
  - `.capture`
  - `.self`
  - `.once`
  - `.passive`
- æŒ‰é”®ä¿®é¥°ç¬¦
  - `.enter`
  - `.tab`
  - `.delete`: åŒæ—¶æ•è·åˆ é™¤å’Œé€€æ ¼
  - `.esc`
  - `.space`
  - `.up`
  - `.down`
  - `.left`
  - `.right`
  - `.ctrl`
  - `.alt`
  - `.shift`
  - `.meta`: mac command

# å…¶ä»–

## åˆ†å‰²æ 

```html
<template v-for="(tag, index) in job.tags">
  <i v-if="index > 0"></i>{{ tag }}
</template>
```

## è·¯å¾„

```html
<template v-for="(item, index) in path">
  <a :href="item.url">{{ item.title }}</a>
  <i v-if="index < path.length - 1"></i>
</template>
```

## å›¾åƒåˆå§‹æœªè½½å…¥

```html
<div v-if="user">
  <img :src="user.avatar" />
</div>
```
