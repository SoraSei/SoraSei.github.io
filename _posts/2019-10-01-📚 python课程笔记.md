---
layout: post
title: ğŸ“š pythonè¯¾ç¨‹ç¬”è®°
img: header_post.jpg
tags: [python, numpy, ğŸ“š]
---

- [python](#python)
  - [å…¶ä»–](#å…¶ä»–)
    - [å˜é‡å€¼äº¤æ¢](#å˜é‡å€¼äº¤æ¢)
    - [å±•å¼€å˜é‡](#å±•å¼€å˜é‡)
    - [æ¡ä»¶åˆ¤æ–­](#æ¡ä»¶åˆ¤æ–­)
    - [å­—ç¬¦ä¸²åµŒå˜é‡](#å­—ç¬¦ä¸²åµŒå˜é‡)
    - [æ•°ç»„å¾ªç¯](#æ•°ç»„å¾ªç¯)
    - [æ•°ç»„æŸ¥é‡](#æ•°ç»„æŸ¥é‡)
    - [æ•°ç»„æ’åº](#æ•°ç»„æ’åº)
    - [æ•°ç»„å†…åŒ…](#æ•°ç»„å†…åŒ…)
    - [é”™è¯¯å¤„ç† å’Œ with](#é”™è¯¯å¤„ç†-å’Œ-with)
- [numpy](#numpy)
  - [åŸºç¡€](#åŸºç¡€)
  - [éšæœºæ•° æ­£æ€åˆ†å¸ƒ](#éšæœºæ•°-æ­£æ€åˆ†å¸ƒ)
  - [æ•°ç»„è¿ç»“ æ•°ç»„åˆ†å‰²](#æ•°ç»„è¿ç»“-æ•°ç»„åˆ†å‰²)
  - [è®¡æ—¶å™¨](#è®¡æ—¶å™¨)
  - [æ•°ç»„ç§¯ç´¯](#æ•°ç»„ç§¯ç´¯)

---

# python

- å…¶ä»–
  - å˜é‡å€¼äº¤æ¢
  - å±•å¼€å˜é‡
  - æ¡ä»¶åˆ¤æ–­
  - å­—ç¬¦ä¸²åµŒå˜é‡
  - æ•°ç»„å¾ªç¯
  - æ•°ç»„æŸ¥é‡
  - æ•°ç»„æ’åº
  - æ•°ç»„å†…åŒ…
  - é”™è¯¯å¤„ç† å’Œ with

## å…¶ä»–

### å˜é‡å€¼äº¤æ¢

```py
x, y = 100, 200
x, y = y, x
```

### å±•å¼€å˜é‡

```py
mylist = [100, 200]
newlist = [*mylist, 300, 400]
mydic = { "name": "test", "time": 2016 }
newdic = { **mydic, "price": 1000 }
```

### æ¡ä»¶åˆ¤æ–­

```py
myprofile = { "name": "koma", "age": 25 }
if "age" in myprofile and myprofile["age"] <= 30:
    print("å¹´è½»æœ‰ä¸º")
# å˜é‡ = çœŸå€¼ if æ¡ä»¶ else å‡å€¼
score = 15
result = "è¶…çº§" if score >= 20 else "æ™®é€š"
print(result)
```

### å­—ç¬¦ä¸²åµŒå˜é‡

```py
dbname = "PostgreSql"
print("å­¦ä¹ " + dbname) # å­—ç¬¦ä¸²è¿æ¥
print(f"å­¦ä¹ {dbname}") # fæ–‡å­—ä¸²
print("å­¦ä¹ {0}".format(dbname)) # formatå‡½æ•°
print("å­¦ä¹ %s" % dbname) # %
```

### æ•°ç»„å¾ªç¯

```py
mylist = [1, 2, 3, 5, 8, 13]
for index in range(len(mylist)):
    print(mylist[index], end=' ')
for val in mylist:
    print(val, end=' ')
for index, val in enumerate(mylist):
    print(index, val)
# å€’åº
for val in reversed(mylist):
    print(val, end=' ')
for index, val in enumerate(reversed(mylist)):
    print(index, val)
# å­—å…¸
mydic = { "name": "test", "time": 2016, "price": 1000 }
for key in mydic:
    print('key:', key, 'value:', mydic[key], end=', ')
for key, val in mydic.items():
    print('key:', key, 'value:', val, end=', ')
```

### æ•°ç»„æŸ¥é‡

```py
mytest1 = [1, 2, 3, 3, 5]
mytest2 = ['a', 'b', 'c', 'c', 'd']
print(list(set(mytest1)))
print(list(set(mytest2)))
```

### æ•°ç»„æ’åº

```py
mylist = [21, 1, 2, 3, 5, 8, 13]
print(sorted(mylist, reverse=True)) # é™åºæ’åˆ—
mylist = [[2, 20], [1, 10], [3, 30]]
print(sorted(mylist, key=lambda item: item[1])) # æŒ‡å®šæ’åº key
mylist = [
    { "name": "curry", "age": 32 },
    { "name": "lebron", "age": 36 },
    { "name": "harden", "age": 31 },
]
print(sorted(mylist, key=lambda item: item["age"])) # å­—å…¸æ’åº
```

### æ•°ç»„å†…åŒ…

```py
mytest = []
for i in range(5):
    mytest.append(i*i)
mytest = [i*i for i in range(10)] # å†…åŒ…
```

### é”™è¯¯å¤„ç† å’Œ with

```py
myfile = open("sample/test.json", "r")
try:
    content = myfile.read()
    raise Exception('test')
except:
    pass
finally:
    myfile.close()
# with å¥æŸ„è‡ªåŠ¨å…³é—­
with open("sample/test.json", "r") as myfile:
    content = myfile.read()
```

# numpy

- åŸºç¡€
- éšæœºæ•° æ­£æ€åˆ†å¸ƒ
- æ•°ç»„è¿ç»“ æ•°ç»„åˆ†å‰²
- è®¡æ—¶å™¨
- æ•°ç»„ç§¯ç´¯

## åŸºç¡€

- `nparray.ndim` æ•°ç»„ç»´æ•°
- `nparray.shape` æ•°ç»„ç»´æ•°(å…ƒç»„ tuple ç±»å‹:è¡Œåˆ—å½¢å¼)
- `nparray.size` æ•°ç»„å…ƒç´ ä¸ªæ•°
- `nparray.dtype` æ•°ç»„å…ƒç´ ç±»å‹
- `nparray.itemsize` æ•°ç»„å•ä¸ªå…ƒç´ å ç”¨å†…å­˜å­—èŠ‚

```py
import numpy as np

myarray = [1,2,3,5,8,13]
nparray = np.array(myarray).reshape(2,3)
print(nparray)
print('æ•°ç»„ç»´æ•°:', nparray.ndim)
print('æ•°ç»„ç»´æ•°(å…ƒç»„tupleç±»å‹:è¡Œåˆ—å½¢å¼)', nparray.shape)
print('æ•°ç»„å…ƒç´ ä¸ªæ•°', nparray.size)
print('æ•°ç»„å…ƒç´ ç±»å‹', nparray.dtype)
print('æ•°ç»„å•ä¸ªå…ƒç´ å ç”¨å†…å­˜å­—èŠ‚', nparray.itemsize)
```

## éšæœºæ•° æ­£æ€åˆ†å¸ƒ

- `from numpy.random import *`
- `rand()` éšæœºæ•°
- `randint()` éšæœºæ•´æ•°
- `choice()` éšæœºæŠ½å–
- `randn()` æ­£æ€åˆ†å¸ƒ

```py
from numpy.random import * # éšæœºæ•°ç”Ÿæˆ

print(rand()) # ç”Ÿæˆ1ä¸ª0-1çš„éšæœºæ•°
print(rand(5)) # ç”Ÿæˆ5ä¸ª0-1çš„éšæœºæ•°æ•°ç»„
print(rand(3,2)) # ç”Ÿæˆ3è¡Œ2åˆ—çš„0-1çš„éšæœºæ•°æ•°ç»„

print(randint(100)) # ç”Ÿæˆ1ä¸ª0-99çš„éšæœºæ•°
print(randint(10,20)) # ç”Ÿæˆ1ä¸ª10-19çš„éšæœºæ•°
print(randint(10,20,5)) # ç”Ÿæˆ5ä¸ª10-19çš„éšæœºæ•°æ•°ç»„
print(randint(10,20,(2,3))) # ç”Ÿæˆ2è¡Œ3åˆ—çš„10-19çš„éšæœºæ•°æ•°ç»„

players = ["curry", "harden", "lebron", "durant", "antetokounmpo", "westbrook", "McGee"]
print(choice(players)) # éšæœºæŠ½å‡ºä¸€ä¸ªçƒå‘˜
print(choice(players, 3)) # éšæœºæŠ½å‡º3ä¸ªçƒå‘˜(æœ‰é‡å¤)
print(choice(players, 3, replace=False)) # éšæœºæŠ½å‡º3ä¸ªçƒå‘˜(æ— é‡å¤)

print(randn()) # æ ‡å‡†æ­£æ€åˆ†å¸ƒ(å¹³å‡:0, åå·®:1)
print(randn(5)) # ç”Ÿæˆ5ä¸ªå…ƒç´ çš„æ­£æ€æ•°ç»„
print(randn(5,5)) # ç”Ÿæˆ5è¡Œ5åˆ—çš„æ­£æ€æ•°ç»„

import matplotlib.pyplot as plt

R = randn(10000) # ç”Ÿæˆ1ä¸‡ä¸ªæ ‡å‡†æ­£æ€åˆ†å¸ƒæ•°ç»„
plt.hist(R, bins=100) # å›¾å½¢åŒ–æ˜¾ç¤º(ç›´æ–¹å›¾)
plt.show()
```

## æ•°ç»„è¿ç»“ æ•°ç»„åˆ†å‰²

- `np.concatenate()` æ•°ç»„è¿ç»“
- `np.vstack()` ç«–å‘æ‹¼æ¥
- `np.hstack()` æ¨ªå‘æ‹¼æ¥
- `np.split()` æ•°ç»„åˆ†å‰²
- `np.vsplit()` å‚ç›´åˆ†å‰² æ¨ªå‘å‡ºåˆ€
- `np.hsplit()` æ°´å¹³åˆ†å‰² ç«–å‘å‡ºåˆ€

```py
a = np.arange(5)
b = np.arange(10, 15)
print(a)
print(b)
print(np.concatenate([a, b])) # æ•°ç»„è¿ç»“
c = np.arange(20, 25)
print(c)
print(np.concatenate([a, b, c])) # æ•°ç»„è¿ç»“

a1 = np.array([
    [1,2,3],
    [7,8,9]
])
a2 = np.array([
    [10,20,30],
    [70,80,90]
])
print(a1)
print(a2)
print(np.concatenate([a1, a2])) # ç«–å‘æ‹¼æ¥
print(np.concatenate([a1, a2], axis=1)) # æ¨ªå‘æ‹¼æ¥

print(np.vstack([a1, a2])) # vstack
print(np.hstack([a1, a2])) # hstack

a = np.arange(8)
print(a)
print(np.split(a, [3])) # æ•°ç»„åˆ†å‰²
print(np.split(a, [3, 6])) # æ•°ç»„åˆ†å‰²

b = np.arange(16).reshape(4,4)
print(b)
upper, lower = np.vsplit(b, [2]) # å‚ç›´æ–¹å‘ï¼Œæ¨ªå‘å‡ºåˆ€
print(upper)
print(lower)
left, right = np.hsplit(b, [2]) # æ°´å¹³æ–¹å‘ï¼Œç«–å‘å‡ºåˆ€
print(left)
print(right)
```

## è®¡æ—¶å™¨

```py
import timeit # timeit è®¡æ—¶ ä¼°ç®—ä»£ç æ‰§è¡Œæ—¶é—´

a = np.random.rand(1000)

def f1():
    b = np.empty(len(a))
    for i in range(len(a)):
        b[i] = 1 / a[i]
    return b

def f2():
    b = 1 / a
    return b

print(timeit.timeit(stmt=f1, number=1000))
print(timeit.timeit(stmt=f2, number=1000))
```

## æ•°ç»„ç§¯ç´¯

- `reduce` æ•°ç»„ç§¯ç´¯å‡½æ•°
- `accumulate` æ•°ç»„ç§¯ç´¯å‡½æ•°(ä¿ç•™ä¸­é—´ç»“æœ)

```py
a = np.arange(1, 6)
print(a)

b = np.add.reduce(a) # reduce æ•°ç»„ç§¯ç´¯å‡½æ•°
print(b)

c = np.multiply.reduce(a)
print(c)

b = np.add.accumulate(a) # accumulate æ•°ç»„ç§¯ç´¯å‡½æ•°(ä¿ç•™ä¸­é—´ç»“æœ)
print(b)

c = np.multiply.accumulate(a)
print(c)
```
