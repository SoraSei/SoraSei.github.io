---
layout: post
title: ğŸ“š å…¶ä»–è¯¾ç¨‹ç¬”è®°
img: header_post.jpg
tags: [å°ç¨‹åº, kotlin, java, ğŸ“š]
---

- [å°ç¨‹åº](#å°ç¨‹åº)
  - [wxml æ–‡ä»¶](#wxml-æ–‡ä»¶)
  - [wxs æ–‡ä»¶](#wxs-æ–‡ä»¶)
  - [js æ–‡ä»¶](#js-æ–‡ä»¶)
- [kotlin](#kotlin)
  - [å˜é‡ æ¡ä»¶ å¾ªç¯ å¼‚å¸¸ null ç©ºå®‰å…¨](#å˜é‡-æ¡ä»¶-å¾ªç¯-å¼‚å¸¸-null-ç©ºå®‰å…¨)
  - [ç±» æ¥å£ ç±»æ‰©å±•æ–¹æ³• with](#ç±»-æ¥å£-ç±»æ‰©å±•æ–¹æ³•-with)
- [java](#java)
  - [æ—¥æœŸ](#æ—¥æœŸ)
  - [åŒ¿åç±»](#åŒ¿åç±»)
  - [lambda](#lambda)
  - [stringBuffer stringBuilder](#stringbuffer-stringbuilder)
  - [å®šæ—¶](#å®šæ—¶)

---

# å°ç¨‹åº

- wxml æ–‡ä»¶
- wxs æ–‡ä»¶
- js æ–‡ä»¶

## wxml æ–‡ä»¶

```html
<!-- åˆ—è¡¨æ¸²æŸ“ -->
<block wx:for="{{ items }}" wx:for-item="item" wx:key="index">
  <view>{{ index }}:{{ item.name }}</view>
</block>

<!-- æ¡ä»¶æ¸²æŸ“ -->
<view wx:if="{{ condition === 1 }}">A</view>
<view wx:elif="{{ condition === 2 }}">B</view>
<view wx:else>C</view>

<!-- äº‹ä»¶ -->
<view bindtap="clickMe">click</view>

<!-- æ¨¡æ¿ -->
<template name="tempItem">
  <view>{{ name }}</view>
</template>

<template is="tempItem" data="{{ ...item }}"></template>

<!-- å¼•ç”¨ import -->
<!-- a.wxml å†…å®¹
<template name="a">Hello</template> -->
<import src="a.wxml"></import>

<!-- å¼•ç”¨ include -->
<!-- a.wxml å†…å®¹
<view>Hello</view> -->
<include src="a.wxml" />
<template is="a"></template>

<!-- è·¯ç”± -->
<navigator open-type="navigateTo" />
<!-- ç­‰ä»·äºwx.navigateTo -->
<navigator open-type="redirectTo" />
<!-- ç­‰ä»·äºwx.redirectTo -->
<navigator open-type="navigateBack" />
<!-- ç­‰ä»·äºwx.navigateBackï¼Œå³è¿”å›æŒ‰é’® -->
<navigator open-type="switchTab" />
<!-- ç­‰ä»·äºwx.switchTabï¼Œå³tabæŒ‰é’® -->
<navigator open-type="reLaunch" />
<!-- ç­‰ä»·äºwx.reLaunch -->
```

## wxs æ–‡ä»¶

```html
<!-- m1.wxs å†…å®¹
module.exports={msg:'hello'} -->
<wxs module="m1">module.exports = { msg: 'hello!' }</wxs>

<!-- m2.wxs å†…å®¹
module.exports=require('m1.wxs') -->
<wxs src="m2.wxs" module="m2"></wxs>
<view>{{ m1.msg }} {{ m2.msg }}</view>
```

## js æ–‡ä»¶

```js
Page({
    data: {
        items: [{ name: 'å•†å“A' }, { name: 'å•†å“B' }] // åˆ—è¡¨æ¸²æŸ“
        condition: Math.floor(Math.random() * 3 + 1) // æ¡ä»¶æ¸²æŸ“
        item: { name: 'æµ‹è¯•å§“å' } // æ¨¡æ¿
    },
    clickMe (e) { console.log(e); } // äº‹ä»¶
})
```

# kotlin

- å˜é‡ æ¡ä»¶ å¾ªç¯ å¼‚å¸¸ null ç©ºå®‰å…¨
- ç±» æ¥å£ ç±»æ‰©å±•æ–¹æ³• with

## å˜é‡ æ¡ä»¶ å¾ªç¯ å¼‚å¸¸ null ç©ºå®‰å…¨

```js
fun main (args: Array<String>) {
    var name: String // å˜é‡
    val age: Int = 10 // å¸¸é‡

    var APILevel = 26 // æ¨æµ‹å˜é‡ç±»å‹
    var isSupport = if (APILevel >= 16) true else false // if èµ‹å€¼
    // åˆ¤æ–­ç±»å‹
    if (APILevel is Int) println('APILevelæ˜¯æ•´å½¢')
    else println(APILevel.javaClass.toString())

    // when åˆ¤æ–­ï¼Œç›¸å½“äº switchï¼Œå¯èµ‹å€¼
    var content = when (APILevel) {
        26, 27 -> 'Android Oreo'
        else   -> 'å…¶ä»–Android'
    }
    // when is åˆ¤æ–­
    when (APILevel) {
        is Int -> println('APILevelæ˜¯æ•´æ•°ç±»å‹')
        else   -> println('æœªçŸ¥ç±»å‹')
    }

    // for å¾ªç¯
    var names = arrayOf('p1', 'p2', 'p3') // æ•°ç»„å®šä¹‰
    for (name in names) println('${name}')
    for (i in names.indices) println('${i}.${names[i]}')
    for ((index, name) in names.withIndex()) println('${index}.${name}')
    for (i in 1..5) print('${i},') // 1,2,3,4,5ï¼Œä»1åˆ°5(åŒ…æ‹¬5)
    for (i in 1 until 5) print('${i},') // 1,2,3,4ï¼Œä»1åˆ°5(ä¸åŒ…æ‹¬5)
    for (i in 2..10 step 2) print('${i},') // 2,4,6,8,10
    for (i in 10 downTo 6) print('${i},') // 10,9,8,7,6

    var num = 5
    if (num in 1..10) println('${num}åœ¨1åˆ°10ä¹‹é—´')

    val value = '10'
    var out: Int? = null // ä¸€èˆ¬å®ä¾‹ä¸å…è®¸ null(ç¼–è¯‘æ—¶æŠ¥é”™)ï¼Œ? ä¸ºå…è®¸ null èµ‹å€¼
    value = out!!.length // !! ä¸ºè·³è¿‡ç¼–è¯‘æ—¶ null æ£€æµ‹ï¼Œè¿è¡Œæ—¶æŠ¥é”™

    // å¼‚å¸¸
    try {
        var out = Integer.parseInt(value)
    } catch (e: Exception) {
        println(e.message)
    } finally {
        println('out is ${out}')
    }

    // èµ‹å€¼å¼‚å¸¸
    var output = try {
        Integer.parseInt(value)
    } catch (e: Exception) {
        -1
    }
}
```

## ç±» æ¥å£ ç±»æ‰©å±•æ–¹æ³• with

```js
class Player (val name: String) {} // å¯åœ¨ç±»å®šä¹‰ä¸­å†™æ„é€ å™¨ï¼Œç›¸å½“äº constructor (name: String) { this.name = name }

// open ä¸ºå¯ç»§æ‰¿ç±»
open class Car (brand: String) {
    var brand: String = brand
    fun showBrand () { println('brand is ${brand}') }
}
// ç»§æ‰¿ç±»
class Lexus : Car('Lexus') {}

// æ¥å£
interface IDatabase {
    fun connect (connString1: String)
    fun close ()
}
// æŠ½è±¡ç±»å¯ä¸å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¯è¢«ç»§æ‰¿
abstract class Database (databaseName: String) : IDatabase {
    val databaseName: String = databaseName
    var connString2: String = ''
    fun showInfo () { println('æ•°æ®åº“: ${databaseName}') }
}
// åŸºç¡€ç±»éœ€å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œç»§æ‰¿æŠ½è±¡ç±»å’Œæ¥å£
class Oracle (connString2: String) : Database('Oracle') {
    init { super.connString2 = connString2 } // åˆå§‹åŒ–æ–¹æ³•ï¼Œèµ‹å€¼ç»™çˆ¶ç±»
    override fun connect (connString1: String) { println('${databaseName}è¿æ¥...(${connString1})') }
    override fun close () { println('${databaseName}å…³é—­') }
}

// ç±»æ‰©å±•æ–¹æ³•ï¼ŒString ç±»æ·»åŠ  add() ç›¸å½“äº var content: String å˜é‡å¯ content.add()
fun String.add (x: Int = 10, y: Int = 20): Int { return x + y }

fun main (args: Array<String>) {
    // åŸºç¡€ç±»å®ç°æŠ½è±¡ç±»å’Œæ¥å£
    var oracle = Oracle('Oracleæ•°æ®åº“è¿æ¥ä¸²')
    oracle.showInfo()
    // with è°ƒç”¨æ–¹æ³•
    with (oracle) {
        connect()
        close()
    }
    // åŒ¿åç±»å®ç°æ¥å£
    var mockDB = object : IDatabase {
        override fun connect (connString1: String) { println('åŒ¿åæ•°æ®åº“è¿æ¥...(${connString1})') }
        override fun close () { println('åŒ¿åæ•°æ®åº“å…³é—­') }
    }
    mockDB.connect('åŒ¿åè¿æ¥ä¸²')
    mockDB.close()
}
```

# java

- æ—¥æœŸ
- åŒ¿åç±»
- lambda
- stringBuffer stringBuilder
- å®šæ—¶

## æ—¥æœŸ

```java
import java.util.Calendar;
import java.util.Date;

public class Main {
    public static void main (String[] args) {
        Date date = new Date(); // å½“å‰æ—¥æœŸ
        System.out.println(date.toString());
        Calendar calendar = Calendar.getInstance();
        System.out.println(calendar.getTime().toString());

        int year = calendar.get(Calendar.YEAR); // å¹´
        int month = calendar.get(Calendar.MONTH) + 1; // æœˆ
        int cdate = calendar.get(Calendar.DATE); // æ—¥
        int hour = calendar.get(Calendar.HOUR_OF_DAY); // æ—¶
        int minute = calendar.get(Calendar.MINUTE); // åˆ†
        int second = calendar.get(Calendar.SECOND); // ç§’
        int day = calendar.get(Calendar.DAY_OF_WEEK); // æ˜ŸæœŸï¼Œ1ä¸ºæ˜ŸæœŸæ—¥ã€2ä¸ºæ˜ŸæœŸ1ï¼Œä»¥æ­¤ç±»æ¨

        Calendar date1 = Calendar.getInstance(); // æ—¥æœŸæ¯”è¾ƒ
        Calendar date2 = Calendar.getInstance();
        date1.set(2017, 1, 1);
        date2.set(2018, 1, 1);
        if (date1.before(date2)) { System.out.println('date1åœ¨date2ä¹‹å‰'); }
    }
}
```

## åŒ¿åç±»

```java
interface IDatabase { void connect (String connString); }

public class Main {
    public static void main (String[] args) {
        // çº¿ä¸Šç±»
        class Oracle implements IDatabase {
            @Override
            public void connect (String connString) { System.out.println('è¿æ¥Oracle'); }
        }
        IDatabase oracle = new Oracle();
        oracle.connect('ip/uid/pwd');

        // åŒ¿åç±»
        IDatabase mysql = new IDatabase() {
            @Override
            public void connect (String connString) { System.out.println('è¿æ¥MySQL'); }
        };
        mysql.connect('ip/uid/pwd');
    }
}
```

## lambda

```java
import java.util.function.BiFunction; // æ–¹æ³•å‹æ¥å£(java.util.function)
import java.util.function.Function;
import java.util.HashMap; // HashMap
import java.util.Map;

interface IDatabase { void update (); } // å•æ–¹æ³•æ— å‚æ•°æ¥å£

public class Main {
    public static void main (String[] args) {
        // Lambda ä¸å•æ–¹æ³•æ— å‚æ•°æ¥å£
        IDatabase blogDB = () -> { System.out.println('æ›´æ–°åšå®¢æ•°æ®åº“'); };
        blogDB.update();

        // Lambda ä¸æ–¹æ³•å‹æ¥å£ Function<T:å‚æ•°ç±»å‹,R:è¿”å›å€¼ç±»å‹>
        Function<Integer, Integer> multi2 = (i) -> { return i * 2; };
        System.out.println(multi2.apply(10));

        // Lambda ä¸æ–¹æ³•å‹æ¥å£ BiFunction<T:ç¬¬1å‚æ•°ç±»å‹,U:ç¬¬2å‚æ•°ç±»å‹,R:è¿”å›å€¼ç±»å‹>
        BiFunction<Integer, Integer, Integer> addfunc = (a, b) -> { return a + b; };
        System.out.println(addfunc.apply(10, 20));

        // Lambda ä¸ HashMap ä½¿ç”¨
        Map<String, String> stringMap = new HashMap<>();
        stringMap.put('usa', 'ç¾å›½');
        stringMap.put('chn', 'ä¸­å›½');
        for (Map.Entry<String, String> item : stringMap.entrySet()) { System.out.println('.' + item.getKey() + ':' + item.getValue()); }
        stringMap.forEach((key, value) -> { System.out.println('.' + key + ':' + value); });
    }
}
```

## stringBuffer stringBuilder

```java
public class Main {
    public static void main (String[] args) {
        StringBuffer stringBuffer = new StringBuffer(); // StringBuffer çº¿ç¨‹å®‰å…¨
        stringBuffer.append('æˆ‘å­¦ä¹ Java');
        stringBuffer.append('æˆ‘å­¦ä¹ Android');
        System.out.println(stringBuffer.toString());

        StringBuilder stringBuilder = new StringBuilder(); // StringBuilder é€Ÿåº¦ä¼˜åŠ¿
        stringBuilder.append('æˆ‘å­¦ä¹ Java');
        stringBuilder.append('æˆ‘å­¦ä¹ Android');
        System.out.println(stringBuilder.toString());
    }
}
```

## å®šæ—¶

```java
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;

public class Main {
    public static void main (String[] args) {
        SimpleDateFormat format = new SimpleDateFormat('[HH:mm:ss]'); // æ—¥æœŸæ ¼å¼åŒ–è¾“å‡º

        class MyTimerTask extends TimerTask {
            @Override
            public void run () { System.out.println(format.format(new Date()) + 'MyTimerTask.run()...'); }
        }

        Timer timer = new Timer();
        timer.schedule(new MyTimerTask(), 1000, 3000);
    }
}
```
